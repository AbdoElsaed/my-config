#!/bin/bash

# Example: ./delete_node_modules.sh path/to/folder1 path/to/folder2


if [[ "$#" -eq 0 ]]; then
  echo "Please provide at least one path to search for 'node_modules' folders."
  exit 1
fi

for path in "$@"; do
  if [[ ! -d "$path" ]]; then
    echo "Error: '$path' is not a valid directory."
  else
    node_modules_dirs=$(find "$path" -type d -name "node_modules" -print)
    if [[ -z "$node_modules_dirs" ]]; then
      echo "No 'node_modules' folders found in '$path'"
    else
      echo "Deleting 'node_modules' folders in '$path'"
      for dir in $node_modules_dirs; do
        echo "  Deleting '$dir'"
        rm -rf "$dir"
      done
    fi
  fi
done
